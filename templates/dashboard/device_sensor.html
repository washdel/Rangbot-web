{% extends 'dashboard_base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-white pt-20 pb-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Back Button -->
        <a href="{% url 'main:device_detail' device.id %}" class="inline-flex items-center gap-2 mb-6 text-gray-600 transition-colors font-light" onmouseover="this.style.color='#ef4444';" onmouseout="this.style.color='#6b7280';">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
            Kembali ke Detail Perangkat
        </a>

        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-light text-gray-900 tracking-tight mb-2">
                Data Sensor
            </h1>
            <p class="text-gray-600 font-light text-sm sm:text-base">
                {{ device.device_name|default:device.serial_number }}
            </p>
        </div>

        <!-- Current Sensor Data -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
            <div class="bg-white rounded-2xl border p-6" style="border-color: rgba(229, 231, 235, 0.6);">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-base font-light text-gray-900">Suhu</h3>
                    <svg class="w-6 h-6" style="color: #ef4444;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </div>
                <p class="text-4xl font-light mb-2" style="color: #ef4444;" id="temperature-value">--</p>
                <p class="text-xs font-light text-gray-500">Â°C</p>
            </div>
            <div class="bg-white rounded-2xl border p-6" style="border-color: rgba(229, 231, 235, 0.6);">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-base font-light text-gray-900">Kelembapan</h3>
                    <svg class="w-6 h-6" style="color: #86efac;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                    </svg>
                </div>
                <p class="text-4xl font-light mb-2" style="color: #86efac;" id="humidity-value">--</p>
                <p class="text-xs font-light text-gray-500">%</p>
            </div>
        </div>

        <!-- Graph Container -->
        <div class="bg-white rounded-2xl border p-6" style="border-color: rgba(229, 231, 235, 0.6);">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-light text-gray-900">Grafik Riwayat DHT22</h2>
                <div class="flex gap-2">
                    <button class="px-4 py-2 rounded-xl border text-xs font-light transition-all duration-300 hover:scale-105" style="border-color: rgba(229, 231, 235, 0.6); color: #6b7280;">
                        Unduh
                    </button>
                    <button class="px-4 py-2 rounded-xl border text-xs font-light transition-all duration-300 hover:scale-105" style="border-color: rgba(229, 231, 235, 0.6); color: #6b7280;">
                        Hapus
                    </button>
                </div>
            </div>
            <div class="h-64 bg-gray-50 rounded-xl flex items-center justify-center border" style="border-color: rgba(229, 231, 235, 0.6);">
                <div class="text-center">
                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    <p class="text-sm font-light text-gray-500">Grafik akan ditampilkan di sini</p>
                    <p class="text-xs font-light text-gray-400 mt-2">Data dari Firebase Realtime Database</p>
                </div>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    // TODO: Implement Firebase Realtime Database connection
    // TODO: Update temperature and humidity values in real-time
    // TODO: Draw chart using Chart.js or similar library
    
    // Example: Simulate real-time updates
    setInterval(() => {
        // This is a placeholder - replace with actual Firebase connection
        // document.getElementById('temperature-value').textContent = '25';
        // document.getElementById('humidity-value').textContent = '60';
    }, 5000);
</script>
{% endblock %}

